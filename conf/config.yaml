# Configuration principale de RustDesk API
# Langue par defaut: Francais
lang: "fr"

app:
  web-client: 1  # 1: Active / 0: Desactive
  register: false # Activer l'inscription des utilisateurs
  register-status: 1 # Statut par defaut des nouveaux utilisateurs (1: Actif / 2: Desactive)
  captcha-threshold: 3 # Seuil de captcha (<0: desactive, 0: toujours, >0: apres N echecs)
  ban-threshold: 0 # Seuil de bannissement (0: desactive, >0: apres N echecs)
  show-swagger: 0 # Afficher la documentation Swagger (1: Oui / 0: Non)
  token-expire: 168h # Duree de validite du token (168h = 7 jours)
  web-sso: true # Activer le SSO pour le client web
  disable-pwd-login: false # Desactiver la connexion par mot de passe

admin:
  title: "RustDesk API - Administration"
  hello-file: "./conf/admin/hello.html"
  hello: ""
  id-server-port: 21116  # Port du serveur ID (pour les commandes serveur)
  relay-server-port: 21117 # Port du serveur Relay (pour les commandes serveur)

gin:
  api-addr: "0.0.0.0:21114"
  mode: "release" # Mode: release, debug, test
  resources-path: 'resources'  # Repertoire des fichiers statiques
  trust-proxy: ""
  cors-allowed-origins: "" # Origines CORS autorisees (separees par des virgules, vide = toutes)

gorm:
  type: "sqlite"
  max-idle-conns: 10
  max-open-conns: 100

mysql:
  username: ""
  password: ""
  addr: ""
  dbname: ""
  tls: "false" # Options: true / false / skip-verify / custom

postgresql:
  host: "127.0.0.1"
  port: "5432"
  user: ""
  password: ""
  dbname: "postgres"
  sslmode: "disable" # Options: disable, require, verify-ca, verify-full
  time-zone: "Europe/Paris" # Fuseau horaire pour la connexion PostgreSQL

rustdesk:
  id-server: "192.168.1.66:21116"
  relay-server: "192.168.1.66:21117"
  api-server: "http://127.0.0.1:21114"
  key: ""
  key-file: "/data/id_ed25519.pub"
  personal: 1
  webclient-magic-queryonline: 0
  ws-host: ""  # Exemple: wss://192.168.1.3:4443

logger:
  path: "./runtime/log.txt"
  level: "info" # Niveaux: trace, debug, info, warn, error, fatal
  report-caller: true

# Logs d'audit de securite (format JSON structure)
audit:
  enabled: true
  file-path: "./runtime/audit.log"  # Chemin du fichier de logs d'audit (JSON)

proxy:
  enable: false
  host: "http://127.0.0.1:1080"

jwt:
  key: ""
  expire-duration: 168h

ldap:
  enable: false
  url: "ldap://ldap.example.com:389"
  tls-ca-file: ""
  tls-verify: false
  base-dn: "dc=example,dc=com"
  bind-dn: "cn=admin,dc=example,dc=com"
  bind-password: "password"

  user:
    base-dn: "ou=users,dc=example,dc=com"
    enable-attr: ""       # Attribut pour verifier si l'utilisateur est actif (AD: "userAccountControl")
    enable-attr-value: "" # Valeur de l'attribut quand l'utilisateur est actif
    filter: "(cn=*)"
    username: "uid"       # Attribut du nom d'utilisateur (AD: "sAMAccountName")
    email: "mail"
    first-name: "givenName"
    last-name: "sn"
    sync: false         # Synchroniser les infos utilisateur a chaque connexion
    admin-group: "cn=admin,dc=example,dc=com" # Groupe des administrateurs
    allow-group: "cn=users,dc=example,dc=com" # Groupe autorise a se connecter
